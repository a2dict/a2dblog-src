---
title: 「架构」总结
date: 2020-03-22 21:05:04
tags: [架构, 编程, 随笔]
---

本文是最近关于「架构」主题的阅读总结。

<!-- more -->

# 演进式架构理念
1. 好的架构从来不是设计出来的，而且演进的结果。好的架构应该适应未来可能存在的不确定变化
2. 架构决策是trade-off。牺牲某种质量属性换其它质量属性。如：内存换时间、性能交换可用性
3. 做「够用」的设计，不做「完美」的设计。问题总是在不断变化（或者被重新认识），不存在「完美」的设计；不能由于「架构」限制了系统演进能力
4. 架构问题是人的问题————Conway's Low
5. 时常审视组织结构及其沟通方式，有利于发现「架构」
6. 人人都是架构师。架构工作是开发工作的一部分，应该鼓励团队一起参与架构设计、评估


# 常用架构模式
架构模式是针对特定问题的可复用解决方案，它通过特定的结构组合提升某方面的质量属性。

## 分层模式

比如常见的MVC。图我懒得画。

## 端口适配器模式

为服务外调用应用适配器设计作为保护屏障，可以隐藏对下游服务的依赖。

## 管道过滤器模式

一种数据流的处理模式，很适用流处理和批量处理。

## SOA架构模式

服务化架构，包括流程的「微服务」设计。
用微服务隐藏服务基础细节（eg: 存储、缓存、索引等），提供语义化接口。
它好处是使系统有更强的伸缩性、容错性、可维护性和可测试性... 
缺点是它延迟增加，不适用实时性要求高的场景；而且便系统变得复杂。

一种常用的演进式方式是，在系统早期应用「分层模式」的大单体，做好服务的横向和纵向划分。
当系统架构成熟后，并对伸缩性存在更多高要求时，再逐步进行微服务化拆分。

## 发布-订阅模式

一般利用消息队列中间件。这种模式相对于同步机制，可以更好地解耦服务；提高系统吞吐量

## 共享数据模式

我认为这是一种很糟糕的设计。
一般表现为多个服务共享相同的数据库和缓存。好处是开发速度快，缺点是后期维护成本极高

## 能力中心模式

开发一个中央CA，围绕着CA提供各种能力及工具支持。

## 一团糟模式

没有架构的设计。我称之为「一团糟」，一般都需要重构。

